<div class="form__container">
  <form [formGroup]="movieForm" (ngSubmit)="addMovieFormSubmit()">
    <ng-container *ngIf="movieForm.controls.img as control">
      <mat-form-field appearance="fill">
        <mat-label>Link do plakatu</mat-label>
        <input
          matInput
          placeholder="img"
          type="text"
          formControlName="img"
          required
        />
        <mat-error *ngIf="control.errors?.['required']">
          <p class="error-style">To pole jest obowiązkowe</p>
        </mat-error>
        <mat-error *ngIf="control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>
    <ng-container *ngIf="movieForm.controls.title as control">
      <mat-form-field appearance="fill">
        <mat-label>Tytuł</mat-label>
        <input
          matInput
          placeholder="Tytuł"
          type="text"
          formControlName="title"
          required
        />
        <mat-error *ngIf="control.errors?.['required']">
          To pole jest obowiązkowe
        </mat-error>
        <mat-error *ngIf="control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>
    <ng-container *ngIf="movieForm.controls.description as control">
      <mat-form-field appearance="fill">
        <mat-label>Opis</mat-label>
        <input
          matInput
          placeholder="Opis"
          type="textarea"
          formControlName="description"
          required
        />

        <mat-error *ngIf="control.errors?.['required']">
          <p class="error-style">To pole jest obowiązkowe</p>
        </mat-error>
        <mat-error *ngIf="control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>
    <ng-container *ngIf="movieForm.controls.description as control">
      <mat-form-field
        appearance="fill"
        *ngIf="categories$ | async as categories"
      >
        <mat-label>Kategoria</mat-label>
        <mat-select
          matInput
          placeholder="Kategoria"
          type="text"
          formControlName="genre"
          required
        >
          <mat-option [value]="category" *ngFor="let category of categories">
            {{ category }}
          </mat-option>
        </mat-select>

        <mat-error *ngIf="control.errors?.['required']">
          <p class="error-style">To pole jest obowiązkowe</p>
        </mat-error>
        <mat-error *ngIf="control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>
    <ng-container *ngIf="movieForm.controls.length as control">
      <mat-form-field appearance="fill">
        <mat-label>Długość w minutach</mat-label>
        <input
          matInput
          placeholder="Długość"
          type="number"
          formControlName="length"
          required
          [numberMaxLength]="3"
        />
        <mat-error *ngIf="control.errors?.['required']">
          <p class="error-style">To pole jest obowiązkowe</p>
        </mat-error>
        <mat-error *ngIf="control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>

    <ng-container *ngIf="movieForm.controls.ageRest as control">
      <mat-form-field
        appearance="fill"
      >
        <mat-label>Kategoria wiekowa</mat-label>
        <mat-select *ngIf="ageCategories$ | async as ageCategories"
          matInput
          placeholder="Kategoria wiekowa"
          formControlName="ageRest"
          required
        > <mat-option *ngFor="let ageCategory of ageCategories" [value]="ageCategory">PG-{{ageCategory}}</mat-option>
        </mat-select>

        <mat-error *ngIf="control.errors?.['required']">
          <p class="error-style">To pole jest obowiązkowe</p>
        </mat-error>
        <mat-error *ngIf="control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>

    <ng-container *ngIf="movieForm.controls.score as control">
      <mat-form-field appearance="fill">
        <mat-label>Ocena</mat-label>
        <input
          matInput
          [numberMaxLength]="2"
          placeholder="Ocena"
          type="number"
          formControlName="score"
          required
        />
        <mat-error *ngIf="control.errors?.['required']">
          <p class="error-style">To pole jest obowiązkowe</p>
        </mat-error>
        <mat-error *ngIf="control.touched&&control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>
    <ng-container *ngIf="movieForm.controls.premier as control">
      <mat-form-field
        appearance="fill"
      >
        <mat-label>Premiera</mat-label>
        <mat-select
          matInput
          placeholder="Premiera"
          formControlName="premier"
          required
        > <mat-option [disabled]="true">Premiera</mat-option>
          <mat-option [value]="true">Tak</mat-option>
          <mat-option [value]="false">Nie</mat-option>
        </mat-select>

        <mat-error *ngIf="control.errors?.['required']">
          <p class="error-style">To pole jest obowiązkowe</p>
        </mat-error>
        <mat-error *ngIf="control.errors?.['whitespace']">
          <p class="error-style">Białe znaki nie są dozwolone</p>
        </mat-error>
      </mat-form-field>
    </ng-container>
    <div class="ctr">
    <button
      mat-fab
      color="primary"
      aria-label="Example icon button with a delete icon"
      type="submit"
    >
      <mat-icon>add</mat-icon>
    </button>
  </div>
  </form>
</div>


