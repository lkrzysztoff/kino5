 <!-- <div class="rsrv">
  <div class="box">
    <div class="reservation__title-box">
      <h1 class="reservation__title">
        {{ film?.title }} <br />| {{ selectedDate }} | {{ showId }}
      </h1>
 -->



<!-- 
    </div>
    <div class="reservation__display">
      <span class="reservation__ekran">Ekran {{ screen.name }}</span>
    </div>
    <div class="reservation__container">
      <div class="reservation__net">
        <div
          class="reservation__letters"
          *ngFor="let letter of letters; let a = index"
        >
          <div class="ltr">{{ letter }}</div>
          <div>
            <button
              id="{{ a + i }}"
              class="reservation__number"
              [disabled]="checkReserved(letter + (i + 1))"
              *ngFor="let number of numbers; let i = index"
              (click)="seatReturn(i, a)"
              (click)="ticket()"
              (click)="reservationService.addToTemporaryReservedSeats(letter + (i + 1))"
              [ngClass]="{'addedToReservation' : reservationService.isSeatInTemporaryReserved(letter + (i + 1))}"
            >
              {{ number }}
            </button>
            
          </div>
        </div>
      </div>
    </div> --> -->
    <!-- </div> -->
<!-- 
    <div class="seats-title"><p>Wybieranie miejsca</p></div>
    <div class="reservation-panel__order-container" *ngIf="reservationBuffer">
      <mat-card class="card">
        <div class="reservation-panel__order-container-chosen-seats">
          Wybrane miejsce {{ reservationBuffer.name }}

          <mat-label>Wybierz typ biletu</mat-label>
          <select (change)="priceTypeChange($event)">
            <option *ngFor="let priceType of show.priceList">
              {{ priceType.type }} {{ priceType.price }}
            </option>
          </select>

          <div class="btns-div">
            <button
              (click)="prank()"
              mat-raised-button
              (click)="addToReservationBuffer(); addToReserved()"
            >
              Dodaj</button
            >&nbsp;&nbsp;
            <button mat-raised-button (click)="clearReservationBuffer()">
              ðŸ—‘
            </button>
          </div>
        </div>
      </mat-card>
    </div>
    <div class="list-container" *ngIf="seatDisplay().length">
      <mat-list class="list"
        >Twoje Rezerwacje ({{ seatDisplay().length }})
        <mat-list-item
          class="list-item"
          *ngFor="let line of seatDisplay(); let i = index"
        >
          Wybrane miejsce {{ line.seat.name }} {{ line.seat.price.type }}
          {{ line.seat.price.price }}
          <button
            class="btn-remove"
            mat-raised-button
            (click)="cart.removeLine(line.seat.show_id, line.seat.name)"
          >
            ðŸ—‘
          </button>
          <mat-divider></mat-divider>
        </mat-list-item>
        <div class="btn-order-container">
          <button
            class="btn-order"
            mat-raised-button
            *ngIf="cart.lines.length"
            routerLink="/order"
          >
            ZÅ‚Ã³Å¼ zamÃ³wienie
          </button>
        </div>
      </mat-list>
    </div>
  </div>
</div> -->



<h1>Films specs {{selectedDate}} {{showId}}</h1>
<div class="reservation__display" *ngIf="show$ | async as shows">
  <div *ngFor="let show of returnShowById(shows,showId)">
    <div *ngIf="films$ | async as films">
      <div *ngFor="let film of returnFilmsById(films, show.filmId)">
        <h1>Films specs {{ film.title }} {{ show.hour }} {{ show.screen }}</h1>
        <div class="reservation-grid-net" *ngIf="screen$ | async as screens">
          <div class="grid" *ngFor="let screen of returnScreenById(screens, show.screen)">
            <div
              class="letter"
              *ngFor="
                let letter of displayProperAmmountOfLetters(
                  letters,
                  screen.rows
                );
                let letterIndex = index
              "
            >
              {{ letter }}
              <button
              class="reservation__number"
                *ngFor="
                  let number of createNumbersArray(screen.colu);
                  let numberIndex = index
                "
                (click)="
                  reservationService.addToTemporaryReservedSeats(letter + (numberIndex + 1));cartService.removeFromCart(letter + (numberIndex + 1))"
                    
                [ngClass]="{
                  addedToReservation:
                    reservationService.isSeatInTemporaryReserved(
                      letter + (numberIndex + 1)
                    )
                }"
              >
                {{ number }}
              </button>
            </div>
            <div
              *ngIf="temporaryReservedSeats$ | async as temporaryReservedSeats"
            >
              <div *ngFor="let temporaryReservedSeat of temporaryReservedSeats">
                Wybrane miejsce: {{ temporaryReservedSeat }}
                <form
                  [formGroup]="seatForm"
                  (ngSubmit)="dodajtest(temporaryReservedSeat, show.id)"
                > 
                  <select formControlName="ticketType" required>
                    <option value="" disabled selected>Wybierz typ biletu</option>
                    <option 
                        
                      *ngFor="let price of show.priceList"
                      [ngValue]="[price.type, price.price]"
                    >
                      {{ price.type }} {{ price.price }}
                    </option>
                  </select>
                  <button
                    (click)="
                      cartService.addToCart$$({
                        showId: show.id,
                        tickets: seatForm.value,
                        seat: temporaryReservedSeat
                      })
                    "
                    [disabled]="cartService.doesCartHave(temporaryReservedSeat)"
                      [disabled]="isFormValid()"
                    type="submit"
                  >
                    ZatwierdÅº
                  </button>
                  <button
                    *ngIf="cart$ | async as cart"
                    (click)="
                      cartService.removeFromCart(temporaryReservedSeat);
                      reservationService.removeFromTemporaryReservedSeats(
                        temporaryReservedSeat
                      )
                    "
                  >
                    Usun
                  </button>
                </form>
              </div>
            </div>
            <button [disabled]="checkIfFormIsFilled()">Zamawiam!</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
